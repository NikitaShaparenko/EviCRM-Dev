@inject IWebHostEnvironment _env;
@inject IHttpClientFactory ClientFactory

<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    <style>
        .action_menu_top_right {
            position: absolute;
            right: 0;
            top: 0;
        }

        .action_menu_top_left {
            position: absolute;
            left: 0;
            top: 0;
        }



        .btn-circle {
            width: 70px;
            height: 70px;
            border-radius: 35px;
            text-align: center;
            padding-left: 0;
            padding-right: 0;
            font-size: 16px;
            white-space: normal; /* восстанавливаем свойству значение по умолчанию */
        }
    </style>
</head>

<body>

    @if (isMenuShown)
    {
        @* <div class="row">
            <button type="button" class="btn btn-outline-info">Поделиться URL карточки</button>
            </div>*@
        <div class="row">
            <button type="button" class="btn btn-outline-info">Убрать обложку карточки</button>
        </div>
        @* <div class="row">
            <button type="button" class="btn btn-outline-info">Подписаться</button>
            </div>*@
        <div class="row">
            <button type="button" class="btn btn-outline-info">Перемещение карточки</button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-outline-info">Копирование карточки</button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-outline-danger">Удалить</button>
        </div>
    }

    <img src="@card_pic_url" style="width:100%; height:200px;" />
    <button type="button" class="btn btn-light-active action_menu_top_left" @onclick="Close_Trigger"><font color="black"><b> x </b></font></button>
    <button type="button" class="btn btn-light-active action_menu_top_right" @onclick="ContextMenu"><font color="black"><b> &#9776; </b></font></button>
    <button type="button" class="btn btn-outline-dark action_menu_top_left_under_pic" @onclick="ContextMenu_EditCardPic"><span class="mdi mdi-clover"></span>Обложка</button>

    <p></p>
    <h5>@card_title</h5>
    <h6><b>@card_title в списке </b>( <i>"@card_parent_desk"</i>)</h6>
    <br>

    <h6><i>Быстрые действия</i></h6>
    <button type="button" class="btn btn-outline-success form-control" @onclick="Card_AddMarks"><span class="mdi mdi-check-box-outline"></span>Добавить список задач</button>
    @*<button type="button" class="btn btn-outline-info form-control" @onclick="Card_AddAttachments"><span class="mdi mdi-file-plus"></span>Добавить файлы</button>
    <button type="button" class="btn btn-outline-secondary form-control" @onclick="Card_Members"><span class="mdi mdi-account-supervisor"></span>Участники</button>*@

    <p></p>

    <textarea id="card_description" name="card_description" @bind=@card_body class="form-control" placeholder="Добавить описание карточки"></textarea>

    <p></p>

    <button type="button" class="btn btn-outline-info form-control" @onclick="Card_Labels">Метки...</button>
    <input type="color" id="head" name="head" class="form-control" style="height:50px; width:100%;" value="@card_color" @onchange="@(e => ColorChanger(e.Value.ToString()))"/>

    <p></p>

  @*  <div class="avatar-group">

        @{
            List<string> cast = bc.getMultipleStringDecodingString(card_members);
            List<string> users_avatars_lst = new List<string>();

            foreach (string elem in cast)
            {
                int p = getUserArrIDByLogin(elem);
                users_avatars_lst.Add(users_avatars[p]);
            }

            for (int av = 0; av < cast.Count; av++)
            {
                if (users_avatars_lst[av] == "" || users_avatars_lst[av] == null)
                {
                    string str = cast[av].ToUpper();
                    char b_str = '?';

                    if (str.Length > 0)
                    {
                        b_str = str[0];
                    }

                    <div class="avatar-group-item">
                        <a href="javascript: void(0);" class="d-inline-block">
                            <div class="avatar-xs">
                                <span class="avatar-title rounded-circle bg-danger text-white font-size-16">

                                    @b_str

                                </span>
                            </div>
                        </a>
                    </div>
                }
                else
                {
                    if (File.Exists(Path.Combine(_env.WebRootPath, "uploads", "users", "avatars", users_avatars_lst[av])))
                    {
                        <div class="avatar-group-item">
                            <a href="javascript: void(0);" class="d-inline-block">
                                <div class="avatar-xs">
                                    <img src="/uploads/users/avatars/@users_avatars_lst[av]" alt="" class="avatar-xs" />
                                </div>
                            </a>
                        </div>
                    }
                    else
                    {
                        <div class="avatar-group-item">
                            <a href="javascript: void(0);" class="d-inline-block">
                                <div class="avatar-xs">
                                    <img src="/uploads/users/avatars/default.png" alt="" class="avatar-xs" />
                                </div>
                            </a>
                        </div>
                    }
                }
            }

        }
    </div>*@

    <p></p>

    <h5 style="background-color:gray; color:white"> <span class="mdi mdi-clock"></span>Время выполнения</h5>
   
    <h6>Начало: @card_start</h6>

    @if (@card_end < @DateTime.Now)
    {
         <h6><font color="red">Срок истёк:</font> @card_end</h6>
    }
    else
    {
         <h6><font color="green">Срок окончания:</font> @card_end</h6>
    }
   
    <p></p>
    @*<h5 style="background-color:gray; color:white"><span class="mdi mdi-file-search"></span>Вложения</h5>

    <div class="wordwrap">
                    <p></p>
                    <table>

                        <tr>
                            <th scope="col" style="width: 70px;">#</th>
                            <th scope="col" style="width: 300px;">Файл</th>
                            <th scope="col" style="width: 70px;"> </th>
                        </tr>
                        @for (int i = 0; i < attach_lst.Count; i++)
                        {
                            string extension = Path.GetExtension(attach_lst[i]);
                            int temp = i;
                            <tr>
                                <td>@(i+1))</td>

                                @switch (extension)
                                {
                                    case ".xls":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xls"></i> @attach_lst[i]</a></td>
                                        break;

                                    case ".pdf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pdf"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".wav":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-wav"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".7z":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-7z"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".aac":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-aac"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".accdb":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-accdb"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".accdt":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-accdt"></i> @attach_lst[i]  </a></td>
                                        break;

                                    case ".amr":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-amr"></i> @attach_lst[i]  </a></td>
                                        break;

                                    case ".apk":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-apk"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".app":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-app"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".asax":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-asax"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".asc":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-asc"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".ash":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ash"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".ashx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ashx"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".asp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-asp"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".aspx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-aspx"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".avi":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-avi"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".axd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-axd"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".bash":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-bash"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".bat":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-bat"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".bin":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-bin"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".bmp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-bmp"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".bpg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-bpg"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".bz2":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-bz2"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".c":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-c"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".cab":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cab"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".cad":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cad"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".caf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-caf"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".cal":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cal"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".cd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cd"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".cer":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cer"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cfg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cfg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cfm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cfm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cfml":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cfml"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cgi":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cgi"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".class":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-class"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cmd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cmd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".coffee":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-coffee"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".com":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-com"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".conf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-conf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cpp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cpp"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".crdownload":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-crdownload"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cs":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cs"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".csh":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-csh"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cson":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cson"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".csproj":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-csproj"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".css":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-css"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".csv":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-csv"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".cue":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-cue"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dat":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dat"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".db":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-db"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dbf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dbf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".deb":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-deb"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dgn":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dgn"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dist":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dist"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".diz":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-diz"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dll":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dll"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dmg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dmg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dng":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dng"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".doc":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-doc"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".docb":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-docb"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".docm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-docm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".docx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-docx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dot":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dot"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dotm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dotm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dotx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dotx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".download":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-download"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dpj":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dpj"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dtd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dtd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dwg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dwg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".dxf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-dxf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".exe":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-exe"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".f4v":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-f4v"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".fax":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-fax"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".fb2":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-fb2"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".fla":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-fla"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".flac":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-flac"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".flv":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-flv"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".gif":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-gif"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".gpg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-gpg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".gz":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-gz"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".h":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-h"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".heic":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-heic"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".htm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-htm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".html":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-html"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ico":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ico"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ics":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ics"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".iff":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-iff"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ifo":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ifo"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".image":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-image"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".inf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-inf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ini":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ini"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".jar":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-jar"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".java":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-java"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".jpe":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-jpe"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".jpeg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-jpeg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".jpg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-jpg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".js":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-js"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".json":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-json"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".jsp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-jsp"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".jsx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-jsx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".key":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-key"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".lnk":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-lnk"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".log":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-log"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".lua":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-lua"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".m":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-m"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".m2v":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-m2v"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".m3u":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-m3u"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".m3u8":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-m3u8"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".m4a":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-m4a"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".m4v":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-m4v"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mdb":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mdb"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mdf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mdf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mid":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mid"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".midi":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-midi"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mkv":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mkv"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mobi":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mobi"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mod":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mod"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mov":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mov"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mp3":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mp3"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mp4":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mp4"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mpa":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mpa"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mpd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mpd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mpeg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mpeg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mpg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mpg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mpp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mpp"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".mpt":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-mpt"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".msi":

                                        break;
                                    case ".nef":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-nef"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".nfo":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-nfo"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".nix":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-nix"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".odb":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-odb"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ods":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ods"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".odt":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-odt"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ogg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ogg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ost":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ost"></i> @attach_lst[i] </a></td>
                                        break;

                                    case ".ott":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ott"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pcd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pcd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pdb":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pdb"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pem":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pem"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pfx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pfx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pgp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pgp"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".php":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-php"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".png":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-png"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".potx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-potx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pps":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pps"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ppsx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ppsx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ppt":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ppt"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pptm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pptm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pptx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pptx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ps":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ps"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".psd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-psd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pst":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pst"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".pub":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-pub"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".rar":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-rar"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".resx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-resx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".rom":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-rom"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".rpm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-rpm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".rsa":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-rsa"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".rss":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-rss"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".rtf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-rtf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sass":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sass"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".scss":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-scss"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sh":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sh"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sldm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sldm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sldx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sldx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sln":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sln"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sql":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sql"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sqlite":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sqlite"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".step":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-step"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".stl":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-stl"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".svg":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-svg"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".swd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-swd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".swf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-swf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".sys":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-sys"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tar":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tar"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tcsh":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tcsh"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tex":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tex"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tga":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tga"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tif":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tif"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tiff":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tiff"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tmp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tmp"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".torrent":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-torrent"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".tsv":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-tsv"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".ttf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-ttf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".txt":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-txt"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".udf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-udf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vb":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vb"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vbproj":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vbproj"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vbs":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vbs"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vcd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vcd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vcs":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vcs"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vdx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vdx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vob":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vob"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vsd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vsd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vss":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vss"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vst":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vst"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vsx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vsx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".vtx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-vtx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".war":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-war"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".wbk":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-wbk"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".webinfo":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-webinfo"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".webm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-webm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".webp":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-webp"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".wma":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-wma"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".wmf":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-wmf"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".wmv":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-wmv"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xaml":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xaml"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xlm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xlm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xlsm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xlsm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xlsx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xlsx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xlt":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xlt"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xltm":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xltm"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xltx":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xltx"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xml":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xml"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xsd":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xsd"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".xz":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-xz"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".yaml":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-yaml"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".yml":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-yml"></i> @attach_lst[i] </a></td>
                                        break;
                                    case ".zip":
                                        <td><a href=@attach_lst_links[i]><i class="fiv-cla fiv-icon-zip"></i> @attach_lst[i] </a></td>
                                        break;

                                    default:
                                        <td><a href=@attach_lst_links[i]><i class="bx bx-save">@attach_lst[i]</i> </a></td>
                                        break;

                                }
                                <td><button type="button" class="btn btn-danger btn-inverse" @onclick="()=>DeleteAttachment(temp)"> х </button></td>

                            </tr>
                        }

                    </table>

                    @if (file_fileName != "")
                    {

                        <p></p>
                        <p><b>Файл загружается, пожалуйста ожидайте...</b> </p>

                        @file_fileName
                        <p>
                            <progress value="@file_UploadedBytes" max="@file_Size"></progress>
                            @(" ") @file_UploadedPercentage.ToString("F1") @("% ")
                            @FormatBytes(file_UploadedBytes) @(" / ") @FormatBytes(file_Size);
                        </p>
                    }


     </div>

      <InputFile OnChange="@LoadFilesAttachments" multiple class="form-control col-lg-12" />


    <p></p>*@
    <h5 style="background-color:gray; color:white"><span class="mdi mdi-file-search"></span>Список целей</h5>


    @if (card_markdown_id != null)
    {
    @for (int i = 0; i<card_markdown_id.Count;i++)
    {
    <div class="row">

        <div class="col-auto">

            <input class="form-check-input" type="checkbox" value="" id="flexCheck-@i" @onchange="()=>Markdown(i)">
            <label class="h6 form-check-label" for="flexCheck-@i">
                @card_markdown_body[i]
            </label>
        </div>

        <div class="col-auto">
            <button type="button" class="btn btn-outline-danger active" @onclick="()=>KillCardMarkdown(i)">x</button>
        </div>
    </div>

    <p></p>
    }
    }
</body>
</html>

@code {
    bool isMenuShown = false;

    [Parameter]
    public string card_members { get; set; }

    [Parameter]
    public List<string> attach_lst {get;set;}

    [Parameter]
    public List<string> attach_lst_links {get;set;}

    [Parameter]
    public List<string> users_avatars { get; set; }

    [Parameter]
    public List<string> users_list { get; set; }

    [Parameter]
    public string card_pic_url { get; set; }

    [Parameter]
    public string card_id { get; set; }

    [Parameter]
    public string card_title { get; set; }

    [Parameter]
    public string card_body { get; set; }

    [Parameter]
    public string card_parent_desk { get; set; }

    [Parameter]
    public string card_color { get; set; } = "#e66465";

    [Parameter]
    public List<string> card_markdown_id {get;set;}

    [Parameter]
    public List<string> card_markdown_checked_status {get;set;}

    [Parameter]
    public List<string> card_markdown_body {get;set;}

    [Parameter]
    public DateTime card_start { get; set; } //вс, 10 апреля 2022 г., 9:00

    [Parameter]
    public DateTime card_end { get; set; } //вс, 10 апреля 2022 г., 9:00

    [Parameter]
    public EventCallback<bool> OnClose { get; set; }

    [Parameter]
    public EventCallback<string> OnMove_Card { get; set; }

    [Parameter]
    public EventCallback<string> OnCopy_Card { get; set; }

    [Parameter]
    public EventCallback<string> OnKill_Card { get; set; }

    [Parameter]
    public EventCallback<string> OnDeleteProfilePic_Card { get; set; }

    [Parameter]
    public EventCallback<(string, string)> OnChangeProfilePic_Card { get; set; }

    BackendController bc = new BackendController();

}